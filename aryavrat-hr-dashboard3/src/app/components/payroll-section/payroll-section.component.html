<div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
    <!-- Dashboard Header -->
    <header class="mb-6">
        <h1 class="text-3xl font-bold text-slate-800">HR Payroll Dashboard</h1>
        <p class="text-slate-500 mt-1">Key metrics and payroll distribution.</p>
    </header>

    <main>
        <!-- KPI Row -->
        <div class="kpi-row">
            <div class="kpi-card" style="border-left-color: #3b82f6;">
                <div>
                    <div class="kpi-label">Total Payroll Cost</div>
                    <div class="kpi-value">{{ kpiData.totalCost }}</div>
                    <div class="kpi-trend">Gross pay for the selected period.</div>
                </div>
            </div>
            <div class="kpi-card" style="border-left-color: #8b5cf6;">
                <div>
                    <div class="kpi-label">Employees Paid</div>
                    <div class="kpi-value">{{ kpiData.totalEmployees }}</div>
                    <div class="kpi-trend">Unique employees in the period.</div>
                </div>
            </div>
            <div class="kpi-card" style="border-left-color: #10b981;">
                <div>
                    <div class="kpi-label">Avg. Net Pay</div>
                    <div class="kpi-value">{{ kpiData.avgNetPay }}</div>
                    <div class="kpi-trend">Avg. take-home per payroll entry.</div>
                </div>
            </div>
            <div class="kpi-card" style="border-left-color: #f97316;">
                <div>
                    <div class="kpi-label">Variable Pay</div>
                    <div class="kpi-value">{{ kpiData.variablePay }}</div>
                    <div class="kpi-trend">Total bonuses and overtime paid.</div>
                </div>
            </div>
        </div>

        <!-- Charts Grid Container -->
        <div class="charts-grid-container mt-6">
            
            <!-- Payroll Trend Chart -->
            <div class="bg-white p-5 rounded-xl shadow chart-card">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">üìà Payroll Trend</h3>
                <div style="height: 300px;">
                    <canvas *ngIf="isBrowser && filteredData.length > 0" baseChart [data]="payrollTrendData" [options]="payrollTrendOptions" type="line"></canvas>
                    <div *ngIf="filteredData.length === 0" class="chart-placeholder">No data available for selected filters.</div>
                </div>
            </div>

            <!-- Payroll Composition Chart -->
            <div class="bg-white p-5 rounded-xl shadow chart-card">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">üìä Payroll Composition</h3>
                 <div class="flex flex-col md:flex-row items-center justify-between" style="height: 300px;">
                    <div class="w-full md:w-1/2 h-full relative">
                        <canvas *ngIf="isBrowser && filteredData.length > 0" baseChart [data]="payrollCompositionData" [options]="payrollCompositionOptions" type="doughnut"></canvas>
                         <div *ngIf="filteredData.length === 0" class="chart-placeholder">No data available.</div>
                    </div>
                    <div class="w-full md:w-1/2 flex flex-col justify-center space-y-3 pl-4">
                       <div *ngFor="let item of compositionLegend" class="flex items-center justify-between text-sm">
                           <div class="flex items-center">
                               <span class="w-3 h-3 rounded-full mr-2" [style.backgroundColor]="item.color"></span>
                               <span class="text-slate-600">{{ item.name }}</span>
                           </div>
                           <span class="font-semibold text-slate-800">{{ item.value }}</span>
                       </div>
                    </div>
                </div>
            </div>

            <!-- Payroll Cost by Department Chart -->
            <div class="bg-white p-5 rounded-xl shadow chart-card">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">üè¢ Payroll Cost by Department</h3>
                <div style="height: 300px;">
                    <canvas *ngIf="isBrowser && filteredData.length > 0" baseChart [data]="payrollCostByDeptData" [options]="payrollCostByDeptOptions" type="bar"></canvas>
                     <div *ngIf="filteredData.length === 0" class="chart-placeholder">No data available for selected filters.</div>
                </div>
            </div>

            <!-- Top Earners Table -->
            <div class="bg-white p-5 rounded-xl shadow chart-card">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">üèÜ Top Earning Employees</h3>
                <div class="table-container">
                    <table class="w-full text-sm text-left text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-50 sticky top-0">
                            <tr>
                                <th class="px-4 py-3">Rank</th>
                                <th class="px-4 py-3">Employee</th>
                                <th class="px-4 py-3">Department</th>
                                <th class="px-4 py-3 text-right">Total Pay</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let employee of topEarners; let i = index" class="bg-white border-b hover:bg-slate-50">
                                <td class="px-4 py-3 font-medium text-slate-900">#{{ i + 1 }}</td>
                                <td class="px-4 py-3">{{ employee.name }}</td>
                                <td class="px-4 py-3">{{ employee.department }}</td>
                                <td class="px-4 py-3 text-right font-semibold">{{ employee.totalCost | currency:'INR':'symbol':'1.0-0' }}</td>
                            </tr>
                            <tr *ngIf="topEarners.length === 0">
                                <td colspan="4" class="text-center py-10 text-slate-500">No employee data to display.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>```